<div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort>

        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="name"> Name</th>
            <td mat-cell *matCellDef="let element" class="name">
                {{element.name}}
            </td>
        </ng-container>

        <ng-container matColumnDef="cpu">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="cpu"> Cpu</th>
            <td mat-cell *matCellDef="let element" class="cpu">
                <div class="flex-wrapper">
                    <div class="single-chart">
                        <svg viewBox="0 0 36 36" [attr.class]="'circular-chart '+color(element.usage.cpu)">
                            <path class="circle-bg"
                                  d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                            />
                            <path class="circle"
                                  [attr.stroke-dasharray]="element.usage.cpu+', 100'"
                                  d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                            />
                            <text x="18" y="20.35" class="percentage">{{element.cpu}}</text>
                        </svg>
                    </div>

                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="gpu">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Gpu(load, memory)</th>
            <td mat-cell *matCellDef="let element">
                <div class="flex-wrapper" *ngFor="let gpu of element.usage.gpu;">
                    <div class="double-chart">
                        <svg viewBox="0 0 36 36" [attr.class]="'circular-chart '+color(gpu.load)">
                            <path class="circle-bg"
                                  d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                            />
                            <path class="circle"
                                  [attr.stroke-dasharray]="gpu.load+', 100'"
                                  d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                            />
                            <text x="18" y="20.35" class="percentage">{{gpu.load}}%</text>
                        </svg>
                    </div>


                    <div class="double-chart">
                        <svg viewBox="0 0 36 36" [attr.class]="'circular-chart '+color(gpu.memory)">
                            <path class="circle-bg"
                                  d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                            />
                            <path class="circle"
                                  [attr.stroke-dasharray]="gpu.memory+', 100'"
                                  d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                            />
                            <text x="18" y="20.35" class="percentage">{{gpu.memory}}%</text>
                        </svg>
                    </div>

                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="memory">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Memory(Gb)</th>
            <td mat-cell *matCellDef="let element">
                <div class="flex-wrapper">
                    <div class="single-chart">
                        <svg viewBox="0 0 36 36" [attr.class]="'circular-chart '+color(element.usage.memory)">
                            <path class="circle-bg"
                                  d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                            />
                            <path class="circle"
                                  [attr.stroke-dasharray]="element.usage.memory+', 100'"
                                  d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                            />
                            <text x="18" y="20.35" class="percentage">{{element.memory}}</text>
                        </svg>
                    </div>

                </div>
            </td>
        </ng-container>


        <ng-container matColumnDef="usage_history">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="usage_history"> Usage history</th>
            <td mat-cell *matCellDef="let element"  class="usage_history">
                <div [attr.id]="'usage_history_'+element.name"></div>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayed_columns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayed_columns;"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[10, 25, 100]" [length]="total" [pageSize]="10"></mat-paginator>
</div>


